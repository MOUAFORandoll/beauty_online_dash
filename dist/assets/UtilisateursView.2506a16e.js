import{r as s,a as y,b as F,J as O,e as N,q as n,p as i,K as x,A as o,c as b,i as H,L as I,F as w,R as J,o as c,w as A,g as B,k as l,z as f,M as K,t as r,N as Q,O as j,P as X,y as V,Q as Y,S as Z,f as M,T as ee,s as le,U as P,V as ae,W as te}from"./index.4b665f4a.js";const ne=l("thead",null,[l("tr",null,[l("th",null,"Nom"),l("th",null,"Email"),l("th",null,"Phone"),l("th",null,"Code Pays"),l("th",null,"Date"),l("th",null,"Action")])],-1),se={class:"whitespace-nowrap"},oe={class:"p-3 lg:px-6 border-t"},ce={__name:"UtilisateursView",setup(ie){let m=new J;s(!1),s(!1);const _=s(!1),p=s(!1),h=s(5),v=s(0);let C=s([]),D=s([]),g=s(!0),u=s(!1);const d=s("");s("");const E=y(()=>C.value.slice(h.value*v.value,h.value*(v.value+1))),$=y(()=>Math.ceil(C.value.length/h.value)),G=y(()=>v.value+1),R=y(()=>{const t=[];for(let a=0;a<$.value;a++)t.push(a);return t});F(async()=>await U());async function U(){g.value=!0;const t=await m.getClientList();g.value=!1,t.status&&(C.value=t.data,D.value=t.data)}let k=s();function S(t){k.value=t,p.value=!0,d.value=""}async function q(t){u.value=!0;const a=await m.sendWelcomeNotifications(t);u.value=!1,a.status&&P.success("Notification envoy\xE9e")}const T=async()=>{u.value=!0;const t=await m.sendPersonnalNotifications({message:d.value,userId:k.value.id});u.value=!1,t.status&&(P.success("Notification envoy\xE9e"),p.value=!1)},W=async()=>{u.value=!0;const t=await m.sendGeneraleNotifications({message:d.value});u.value=!1,t.status&&(P.success("Notification g\xE9n\xE9rale envoy\xE9e"),_.value=!1)};return(t,a)=>{const z=O("Loader");return c(),N(w,null,[n(x,{modelValue:_.value,"onUpdate:modelValue":a[1]||(a[1]=e=>_.value=e),title:"Notification G\xE9n\xE9rale"},{default:i(()=>[A(l("textarea",{"onUpdate:modelValue":a[0]||(a[0]=e=>d.value=e),placeholder:"\xC9crivez votre message ici...",class:"w-full h-32 p-2 border rounded mb-4"},null,512),[[B,d.value]]),n(f,{loading:o(u),label:"Envoyer \xE0 tous",color:"info",onClick:W},null,8,["loading"])]),_:1},8,["modelValue"]),o(k)?(c(),b(x,{key:0,modelValue:p.value,"onUpdate:modelValue":a[3]||(a[3]=e=>p.value=e),title:"Notification Personnalis\xE9e"},{default:i(()=>[l("p",null,[K(" Envoyer une notification \xE0 "),l("b",null,r(o(k).nom),1)]),A(l("textarea",{"onUpdate:modelValue":a[2]||(a[2]=e=>d.value=e),placeholder:"Votre message ici...",class:"w-full h-32 p-2 border rounded mb-4"},null,512),[[B,d.value]]),n(f,{loading:o(u),label:"Envoyer",color:"info",onClick:T},null,8,["loading"])]),_:1},8,["modelValue"])):H("",!0),n(I,null,{default:i(()=>[n(Q,null,{default:i(()=>[n(j,{icon:o(X),title:"Liste des clients",main:""},{default:i(()=>[n(V,null,{default:i(()=>[n(f,{loading:o(g),icon:o(Y),label:"Actualiser",color:"contrast","rounded-full":"",small:"",onClick:U},null,8,["loading","icon"]),n(f,{icon:o(Z),label:"Notif G\xE9n\xE9rale",color:"info","rounded-full":"",small:"",onClick:a[4]||(a[4]=e=>_.value=!0)},null,8,["icon"])]),_:1})]),_:1},8,["icon"]),o(g)?(c(),b(z,{key:0})):(c(),b(le,{key:1,class:"mb-2","has-table":""},{default:i(()=>[l("table",null,[ne,l("tbody",null,[(c(!0),N(w,null,M(E.value,e=>(c(),N("tr",{key:e.id},[l("td",null,r(e.userName),1),l("td",null,r(e.email),1),l("td",null,r(e.phone),1),l("td",null,r(e.countryCode),1),l("td",null,r(e.date_created),1),l("td",se,[n(V,null,{default:i(()=>[n(f,{color:e.status?"info":"danger",icon:o(ae),loading:o(u),small:"",onClick:L=>q(e.id)},null,8,["color","icon","loading","onClick"]),n(f,{icon:o(te),color:"success",small:"",onClick:L=>S(e)},null,8,["icon","onClick"])]),_:2},1024)])]))),128))])]),l("div",oe,[n(ee,null,{default:i(()=>[n(V,null,{default:i(()=>[(c(!0),N(w,null,M(R.value,e=>(c(),b(f,{key:e,active:e===v.value,label:e+1,color:e===v.value?"lightDark":"whiteDark",small:"",onClick:L=>v.value=e},null,8,["active","label","color","onClick"]))),128))]),_:1}),l("small",null,"Page "+r(G.value)+" sur "+r($.value),1)]),_:1})])]),_:1}))]),_:1})]),_:1})],64)}}};export{ce as default};
