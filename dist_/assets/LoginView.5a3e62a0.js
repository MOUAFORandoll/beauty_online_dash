import{o as n,c as F,_,a as v,u as L,r as h,b as $,d as A,e as d,w as k,v as M,n as b,F as U,f as D,t as S,g as P,h as N,i as V,j as z,k as I,l as K,m as j,p as f,q as m,s as H,x as T,y as O,z as G,A as y,B as q,C as J,D as Q,R as W}from"./index.5e2795b3.js";import{_ as X,a as Y}from"./LayoutGuest.ddef6e86.js";const Z={__name:"FormControlIcon",props:{icon:{type:String,default:null},h:{type:String,default:null}},setup(e){return(i,t)=>(n(),F(_,{path:e.icon,w:"w-10",h:e.h,class:"absolute top-0 left-0 z-10 pointer-events-none text-gray-500 dark:text-slate-400"},null,8,["path","h"]))}},ee={class:"relative"},le=["id","name"],te=["value"],ae=["id","name","maxlength","placeholder","required"],ne=["id","name","maxlength","inputmode","autocomplete","required","placeholder","type"],E={__name:"FormControl",props:{name:{type:String,default:null},id:{type:String,default:null},autocomplete:{type:String,default:null},maxlength:{type:String,default:null},placeholder:{type:String,default:null},inputmode:{type:String,default:null},icon:{type:String,default:null},options:{type:Array,default:null},type:{type:String,default:"text"},modelValue:{type:[String,Number,Boolean,Array,Object],default:""},required:Boolean,borderless:Boolean,transparent:Boolean,ctrlKFocus:Boolean},emits:["update:modelValue","setRef"],setup(e,{emit:i}){const t=e,l=v({get:()=>t.modelValue,set:c=>{i("update:modelValue",c)}}),a=v(()=>{const c=["px-3 py-2 max-w-full focus:ring focus:outline-none border-gray-700 rounded w-full","dark:placeholder-gray-400",p.value==="textarea"?"h-24":"h-12",t.borderless?"border-0":"border",t.transparent?"bg-transparent":"bg-white dark:bg-slate-800"];return t.icon&&c.push("pl-10"),c}),p=v(()=>t.options?"select":t.type),w=v(()=>t.type==="textarea"?"h-full":"h-12"),g=L(),u=h(null),x=h(null),r=h(null);if($(()=>{u.value?i("setRef",u.value):x.value?i("setRef",x.value):i("setRef",r.value)}),t.ctrlKFocus){const c=s=>{s.ctrlKey&&s.key==="k"?(s.preventDefault(),r.value.focus()):s.key==="Escape"&&r.value.blur()};$(()=>{g.isFieldFocusRegistered||(window.addEventListener("keydown",c),g.isFieldFocusRegistered=!0)}),A(()=>{window.removeEventListener("keydown",c),g.isFieldFocusRegistered=!1})}return(c,s)=>(n(),d("div",ee,[p.value==="select"?k((n(),d("select",{key:0,id:e.id,"onUpdate:modelValue":s[0]||(s[0]=o=>l.value=o),name:e.name,class:b(a.value)},[(n(!0),d(U,null,D(e.options,o=>{var B,R;return n(),d("option",{key:(B=o.id)!=null?B:o,value:o},S((R=o.label)!=null?R:o),9,te)}),128))],10,le)),[[M,l.value]]):p.value==="textarea"?k((n(),d("textarea",{key:1,id:e.id,"onUpdate:modelValue":s[1]||(s[1]=o=>l.value=o),class:b(a.value),name:e.name,maxlength:e.maxlength,placeholder:e.placeholder,required:e.required},null,10,ae)),[[P,l.value]]):k((n(),d("input",{key:2,id:e.id,ref_key:"inputEl",ref:r,"onUpdate:modelValue":s[2]||(s[2]=o=>l.value=o),name:e.name,maxlength:e.maxlength,inputmode:e.inputmode,autocomplete:e.autocomplete,required:e.required,placeholder:e.placeholder,type:p.value,class:b(a.value)},null,10,ne)),[[N,l.value]]),e.icon?(n(),F(Z,{key:3,icon:e.icon,h:w.value},null,8,["icon","h"])):V("",!0)]))}},se={class:"mb-6 last:mb-0"},oe=["for"],ue={key:1,class:"text-xs text-gray-500 dark:text-slate-400 mt-1"},C={__name:"FormField",props:{label:{type:String,default:null},labelFor:{type:String,default:null},help:{type:String,default:null}},setup(e){const i=z(),t=v(()=>{const l=[],a=i.default().length;return a>1&&l.push("grid grid-cols-1 gap-3"),a===2&&l.push("md:grid-cols-2"),l});return(l,a)=>(n(),d("div",se,[e.label?(n(),d("label",{key:0,for:e.labelFor,class:"block font-bold mb-2"},S(e.label),9,oe)):V("",!0),I("div",{class:b(t.value)},[K(l.$slots,"default")],2),e.help?(n(),d("div",ue,S(e.help),1)):V("",!0)]))}},de={__name:"LoginView",setup(e){let i=new W,t=h(!1),l=h(""),a=h("");const p=j();async function w(){t.value=!0;let g={phone:l.value,password:a.value};const u=await i.logIn(g);console.log(u.status),u.status==!0&&(p.push("/"),console.log("-----------------")),t.value=!1}return(g,u)=>(n(),F(X,null,{default:f(()=>[m(Y,{bg:"purplePink"},{default:f(({cardClass:x})=>[m(H,{class:b(x),"is-form":"",onSubmit:T(w,["prevent"])},{footer:f(()=>[m(O,null,{default:f(()=>[m(G,{type:"submit",loading:y(t),color:"info",label:"Login"},null,8,["loading"])]),_:1})]),default:f(()=>[m(C,{label:"Login Phone",help:"Please enter your phone"},{default:f(()=>[m(E,{modelValue:y(l),"onUpdate:modelValue":u[0]||(u[0]=r=>q(l)?l.value=r:l=r),icon:y(J),name:"login",autocomplete:"username"},null,8,["modelValue","icon"])]),_:1}),m(C,{label:"Password",help:"Please enter your password"},{default:f(()=>[m(E,{modelValue:y(a),"onUpdate:modelValue":u[1]||(u[1]=r=>q(a)?a.value=r:a=r),icon:y(Q),type:"password",name:"password",autocomplete:"current-password"},null,8,["modelValue","icon"])]),_:1})]),_:2},1032,["class","onSubmit"])]),_:1})]),_:1}))}};export{de as default};
