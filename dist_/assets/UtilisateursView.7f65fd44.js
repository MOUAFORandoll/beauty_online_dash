import{r as o,a as k,b as K,J as Q,e as y,q as t,p as i,K as L,A as s,c as C,i as W,L as X,F as V,R as j,o as u,w as x,g as M,k as l,z as c,M as Y,t as r,N as Z,O as ee,P as le,y as P,Q as ae,S as te,f as B,T as ne,s as oe,U as G,V as se,W as ie,X as ue}from"./index.83d9204d.js";const ce=l("thead",null,[l("tr",null,[l("th",null,"Nom"),l("th",null,"Email"),l("th",null,"Phone"),l("th",null,"Code Pays"),l("th",null,"Date"),l("th",null,"Action")])],-1),re={class:"whitespace-nowrap"},de={class:"p-3 lg:px-6 border-t"},me={__name:"UtilisateursView",setup(ve){let w=new j;const D=o(!1),E=o(!1),_=o(!1),p=o(!1),N=o(5),v=o(0);let b=o([]),S=o([]),g=o(!0),f=o(!1);const d=o(""),$=o(""),R=k(()=>b.value.slice(N.value*v.value,N.value*(v.value+1))),U=k(()=>Math.ceil(b.value.length/N.value)),q=k(()=>v.value+1),T=k(()=>{const a=[];for(let n=0;n<U.value;n++)a.push(n);return a});K(async()=>await A());async function A(){g.value=!0;const a=await w.getClientList();g.value=!1,a.status&&(b.value=a.data,S.value=a.data)}let m=o();function z(a){m.value=a,D.value=!0,$.value=""}function F(a){m.value=a,E.value=!0,$.value=""}function O(a){m.value=a,p.value=!0,d.value=""}const H=async()=>{f.value=!0;const a=await w.sendGeneraleNotifications({message:d.value,userId:m.value.id});f.value=!1,a.status&&(G.success("Notification envoy\xE9e"),p.value=!1)},I=async()=>{f.value=!0;const a=await w.sendGeneraleNotifications({message:d.value});f.value=!1,a.status&&(G.success("Notification g\xE9n\xE9rale envoy\xE9e"),_.value=!1)};return(a,n)=>{const J=Q("Loader");return u(),y(V,null,[t(L,{modelValue:_.value,"onUpdate:modelValue":n[1]||(n[1]=e=>_.value=e),title:"Notification G\xE9n\xE9rale"},{default:i(()=>[x(l("textarea",{"onUpdate:modelValue":n[0]||(n[0]=e=>d.value=e),placeholder:"\xC9crivez votre message ici...",class:"w-full h-32 p-2 border rounded mb-4"},null,512),[[M,d.value]]),t(c,{loading:s(f),label:"Envoyer \xE0 tous",color:"info",onClick:I},null,8,["loading"])]),_:1},8,["modelValue"]),s(m)?(u(),C(L,{key:0,modelValue:p.value,"onUpdate:modelValue":n[3]||(n[3]=e=>p.value=e),title:"Notification Personnalis\xE9e"},{default:i(()=>[l("p",null,[Y("Envoyer une notification \xE0 "),l("b",null,r(s(m).nom),1)]),x(l("textarea",{"onUpdate:modelValue":n[2]||(n[2]=e=>d.value=e),placeholder:"Votre message ici...",class:"w-full h-32 p-2 border rounded mb-4"},null,512),[[M,d.value]]),t(c,{loading:s(f),label:"Envoyer",color:"info",onClick:H},null,8,["loading"])]),_:1},8,["modelValue"])):W("",!0),t(X,null,{default:i(()=>[t(Z,null,{default:i(()=>[t(ee,{icon:s(le),title:"Liste des clients",main:""},{default:i(()=>[t(P,null,{default:i(()=>[t(c,{loading:s(g),icon:s(ae),label:"Actualiser",color:"contrast","rounded-full":"",small:"",onClick:A},null,8,["loading","icon"]),t(c,{icon:s(te),label:"Notif G\xE9n\xE9rale",color:"info","rounded-full":"",small:"",onClick:n[4]||(n[4]=e=>_.value=!0)},null,8,["icon"])]),_:1})]),_:1},8,["icon"]),s(g)?(u(),C(J,{key:0})):(u(),C(oe,{key:1,class:"mb-2","has-table":""},{default:i(()=>[l("table",null,[ce,l("tbody",null,[(u(!0),y(V,null,B(R.value,e=>(u(),y("tr",{key:e.id},[l("td",null,r(e.userName),1),l("td",null,r(e.email),1),l("td",null,r(e.phone),1),l("td",null,r(e.countryCode),1),l("td",null,r(e.date_created),1),l("td",re,[t(P,null,{default:i(()=>[t(c,{color:"warning",icon:s(se),small:"",onClick:h=>z(e)},null,8,["icon","onClick"]),t(c,{color:e.status?"info":"danger",icon:s(ie),small:"",onClick:h=>F(e)},null,8,["color","icon","onClick"]),t(c,{icon:s(ue),color:"success",small:"",onClick:h=>O(e)},null,8,["icon","onClick"])]),_:2},1024)])]))),128))])]),l("div",de,[t(ne,null,{default:i(()=>[t(P,null,{default:i(()=>[(u(!0),y(V,null,B(T.value,e=>(u(),C(c,{key:e,active:e===v.value,label:e+1,color:e===v.value?"lightDark":"whiteDark",small:"",onClick:h=>v.value=e},null,8,["active","label","color","onClick"]))),128))]),_:1}),l("small",null,"Page "+r(q.value)+" sur "+r(U.value),1)]),_:1})])]),_:1}))]),_:1})]),_:1})],64)}}};export{me as default};
