import{r as o,a as y,b as J,J as K,e as N,q as n,p as i,K as L,A as s,c as C,i as Q,L as j,F as V,R as X,o as c,w as x,g as M,k as l,z as r,M as Y,t as d,N as Z,O as ee,P as le,y as P,Q as ae,S as te,f as B,T as ne,s as oe,U as $,V as D,W as se}from"./index.a569bead.js";const ie=l("thead",null,[l("tr",null,[l("th",null,"Nom"),l("th",null,"Email"),l("th",null,"Phone"),l("th",null,"Code Pays"),l("th",null,"Date"),l("th",null,"Action")])],-1),ue={class:"whitespace-nowrap"},ce={class:"p-3 lg:px-6 border-t"},fe={__name:"UtilisateursView",setup(re){let _=new X;o(!1);const E=o(!1),g=o(!1),p=o(!1),b=o(5),v=o(0);let h=o([]),G=o([]),k=o(!0),u=o(!1);const f=o(""),S=o(""),R=y(()=>h.value.slice(b.value*v.value,b.value*(v.value+1))),U=y(()=>Math.ceil(h.value.length/b.value)),q=y(()=>v.value+1),T=y(()=>{const a=[];for(let t=0;t<U.value;t++)a.push(t);return a});J(async()=>await A());async function A(){k.value=!0;const a=await _.getClientList();k.value=!1,a.status&&(h.value=a.data,G.value=a.data)}let m=o();function W(a){m.value=a,E.value=!0,S.value=""}function z(a){m.value=a,p.value=!0,f.value=""}async function F(a){u.value=!0;const t=await _.sendWelcomeNotifications(a);u.value=!1,t.status&&$.success("Notification envoy\xE9e")}const O=async()=>{u.value=!0;const a=await _.sendPersonnalNotifications({message:f.value,userId:m.value.id});u.value=!1,a.status&&($.success("Notification envoy\xE9e"),p.value=!1)},H=async()=>{u.value=!0;const a=await _.sendGeneraleNotifications({message:f.value});u.value=!1,a.status&&($.success("Notification g\xE9n\xE9rale envoy\xE9e"),g.value=!1)};return(a,t)=>{const I=K("Loader");return c(),N(V,null,[n(L,{modelValue:g.value,"onUpdate:modelValue":t[1]||(t[1]=e=>g.value=e),title:"Notification G\xE9n\xE9rale"},{default:i(()=>[x(l("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>f.value=e),placeholder:"\xC9crivez votre message ici...",class:"w-full h-32 p-2 border rounded mb-4"},null,512),[[M,f.value]]),n(r,{loading:s(u),label:"Envoyer \xE0 tous",color:"info",onClick:H},null,8,["loading"])]),_:1},8,["modelValue"]),s(m)?(c(),C(L,{key:0,modelValue:p.value,"onUpdate:modelValue":t[3]||(t[3]=e=>p.value=e),title:"Notification Personnalis\xE9e"},{default:i(()=>[l("p",null,[Y(" Envoyer une notification \xE0 "),l("b",null,d(s(m).nom),1)]),x(l("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>f.value=e),placeholder:"Votre message ici...",class:"w-full h-32 p-2 border rounded mb-4"},null,512),[[M,f.value]]),n(r,{loading:s(u),label:"Envoyer",color:"info",onClick:O},null,8,["loading"])]),_:1},8,["modelValue"])):Q("",!0),n(j,null,{default:i(()=>[n(Z,null,{default:i(()=>[n(ee,{icon:s(le),title:"Liste des clients",main:""},{default:i(()=>[n(P,null,{default:i(()=>[n(r,{loading:s(k),icon:s(ae),label:"Actualiser",color:"contrast","rounded-full":"",small:"",onClick:A},null,8,["loading","icon"]),n(r,{icon:s(te),label:"Notif G\xE9n\xE9rale",color:"info","rounded-full":"",small:"",onClick:t[4]||(t[4]=e=>g.value=!0)},null,8,["icon"])]),_:1})]),_:1},8,["icon"]),s(k)?(c(),C(I,{key:0})):(c(),C(oe,{key:1,class:"mb-2","has-table":""},{default:i(()=>[l("table",null,[ie,l("tbody",null,[(c(!0),N(V,null,B(R.value,e=>(c(),N("tr",{key:e.id},[l("td",null,d(e.userName),1),l("td",null,d(e.email),1),l("td",null,d(e.phone),1),l("td",null,d(e.countryCode),1),l("td",null,d(e.date_created),1),l("td",ue,[n(P,null,{default:i(()=>[n(r,{color:e.status?"info":"danger",icon:s(D),small:"",onClick:w=>W(e)},null,8,["color","icon","onClick"]),n(r,{color:e.status?"info":"danger",icon:s(D),loading:s(u),small:"",onClick:w=>F(e.id)},null,8,["color","icon","loading","onClick"]),n(r,{icon:s(se),color:"success",small:"",onClick:w=>z(e)},null,8,["icon","onClick"])]),_:2},1024)])]))),128))])]),l("div",ce,[n(ne,null,{default:i(()=>[n(P,null,{default:i(()=>[(c(!0),N(V,null,B(T.value,e=>(c(),C(r,{key:e,active:e===v.value,label:e+1,color:e===v.value?"lightDark":"whiteDark",small:"",onClick:w=>v.value=e},null,8,["active","label","color","onClick"]))),128))]),_:1}),l("small",null,"Page "+d(q.value)+" sur "+d(U.value),1)]),_:1})])]),_:1}))]),_:1})]),_:1})],64)}}};export{fe as default};
